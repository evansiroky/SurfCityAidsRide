mixin routeHTML(cfg, stations, websafeName)
  - function websafeName(s) { return s.toLowerCase().replace(' ', '-') }
  h4(id='route' + cfg.miles)= cfg.miles + ' Mile'
  h5= cfg.summary
  .row
    .col-xs-12.col-md-6
      p= cfg.description
      p.reference-list
        span.support-intro Rest Stops:
        each stop in cfg.restStops
          a(href='#' + websafeName(stations[stop].name) + '-rest-stop')= stations[stop].name
      if cfg.foodStops
        p.reference-list
          span.support-intro Food Stops:
          each stop in cfg.foodStops
            a(href='#' + websafeName(stations[stop].name) + '-rest-stop')= stations[stop].name
    .col-xs-12.col-md-6.text-xs-center
      a(href=cfg.gpsLink)
        img(src='assets/' + cfg.miles +'-profile.png' alt=cfg.miles + ' Mile Route Elevation Profile')
      a(href=cfg.gpsLink) View Full Route

mixin restStopHTML(cfg, websafeName)
  - function websafeName(s) { return s.toLowerCase().replace(' ', '-') }
  .col-md-12.col-lg-6
    h4(id=websafeName(cfg.name) + '-rest-stop')= cfg.name
    table
      tr
        td Address
        td
          address!= cfg.address + '<br/>' + cfg.city
      tr
        td Volunteer Setup Time
        td= cfg.volunteerInfo
      tr
        td Hours open for Riders
        td= cfg.hours
      
    p.reference-list
      span.support-intro Routes:
      each route in cfg.routes
        a(href='#route' + route)= route + ' Mile'

extends layout.jade

block pageHeader
  h1 Day of Event

block content

  .row
    .col-xs-1
    #scar-content.col-xs-10
      h3 Registration

      .row
        .col-xs-12.col-md-6
          h4 Online Registration
          p.text-danger Coming Soon!
        .col-xs-12.col-md-6
          h4 Day of Event Registration
          p It is possible to register to ride on the day of the event.  Registration for each ride will close at the start of each ride.

      hr
      h3 Start / Finish
      .row
        .col-xs-12.col-sm-6.text-xs-center

          a#map-link(href='http://maps.google.com/maps?q=701+Ocean+St,+Santa+Cruz,+CA')
            img(src='assets/parking.png' alt='Parking Map')
            | View in Map      

        .col-xs-12.col-sm-6
          p The start and finish are at the Santa Cruz County Courthouse.  There is free parking onsite.  Click on the map to get detailed directions.

          address
          | Santa Cruz County Courthouse <br/>
          | 701 Ocean Street <br/>
          | Santa Cruz, CA 95060

      hr
      h3 Start Times
      table
        tr
          th Ride Distance
          th Start Time
        tr
          td 12 Mile
          td 9:00 am
        tr
          td 30 Mile
          td 9:00 am
        tr
          td 65 Mile
          td 8:00 am
        tr
          td 100 Mile
          td 7:00 am

      p Start at the appropriate time for your skill level and route length to finish by 5pm!

      hr
      h3#routes Routes

      -var routeId = 0
      while routeId < 4
        +routeHTML(routes[routeId++], stations, websafeName)

      hr
      h3 Ride Support and Rest Stops
      p There will be about 7-9 official vehicles patrolling the routes, which will be equipped with pumps, bike carriers, repair kits, first aid kits, water, communication, and event contact lists, which will also be available at rest stops. There will be a moto safety team consisting of about the same number of official vehicles. Each stop will also have about 4-8 volunteers. Rest stops will each have 2 porta potties unless there is a rest room on site.
      
      .row
        -var stopId = 0
        while stopId < 7
          +restStopHTML(stations[stopId++], websafeName)

      hr
      h3 Rider Etiquette
      p This event is a charity bike ride benefitting the Santa Cruz AIDS Project.  It is not a race and is not timed, so just have fun!  Each ride course will follow established roads, and riders must obey traffic laws.  Temporary wayfinding signs will be posted at each turn.  Riders are encouraged to familiarize themselves with the route ahead of time.  
